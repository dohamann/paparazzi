<!-- DOCTYPE flight_plan SYSTEM "flight_plan.dtd" -->

<flight_plan NAME="Fink" LON0="1.27289" MAX_DIST_FROM_HOME="1000" GROUND_ALT="185" SECURITY_HEIGHT="25" QFU="270" ALT="250" LAT0="43.46223">
  <waypoints>
    <waypoint name="HOME" x="0.0" y="120.0" alt="250."/>
  </waypoints>
	<header>
		#include "sonar/sonar_array_i2c.h"
	</header>
	
	<exceptions>
		<exception cond="30 > sonar_values.front" deroute="front"/>
		<exception cond="30 > sonar_values.back" deroute="back"/>
		<exception cond="30 > sonar_values.right" deroute="right"/>
		<exception cond="30 > sonar_values.left" deroute="left"/>
	</exceptions>


<blocks>
		<block name="front">
			<attitude pitch="-1" roll="0" throttle="0.6" until="sonar_values.front > 40" vmode="throttle"/>
		</block>
		<block name="back">
			<attitude pitch="1" roll="0" throttle="0.6" until="sonar_values.back > 40" vmode="throttle"/>
		</block>
		<block name="left">
			<attitude pitch="0" roll="-1" throttle="0.6" until="sonar_values.left > 40" vmode="throttle"/>
		</block>
		<block name="right">
			<attitude pitch="0" roll="1" throttle="0.6" until="sonar_values.right > 40" vmode="throttle"/>
		</block>
		<block name="default">
			<attitude pitch="0" roll="0" throttle="0.6" until="FALSE" vmode="throttle"/>
		</block>
  </blocks>
</flight_plan>

